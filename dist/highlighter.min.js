!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};const t=(()=>"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0)();var n=(e=>async(n,o)=>{"string"==typeof n&&(n=(new t.TextEncoder).encode(n)),o={outputFormat:"hex",...o};const i=await t.crypto.subtle.digest(e,n);return"hex"===o.outputFormat?(e=>{const t=new DataView(e);let n="";for(let e=0;e<t.byteLength;e+=4)n+=t.getUint32(e).toString(16).padStart(8,"0");return n})(i):i})("SHA-256");const o="jquery-highlighter-highlighted",i=GM_info.script.name+": clear data",r={enabled:!1},s=function(){return $(this)},a={days:7},c="1/"+GM_info.script.version.split(".")[0],u=(e=>(e.second=e.seconds=1,e.minute=e.minutes=60*e.seconds,e.hour=e.hours=60*e.minutes,e.day=e.days=24*e.hours,e.week=e.weeks=7*e.days,e))({});async function l(e){const t=await n(e);return!!GM_getValue(t)}async function f(e,t){const o=new Date(t).toLocaleString(),i=await n(e),r={expires:t,version:c},s=JSON.stringify(r);d(`caching ${e} (${i}) until ${o}`),GM_setValue(i,s)}function d(...e){r.enabled&&console.warn(...e)}function g(e){for(const t of GM_listValues()){const n=GM_getValue(t),o=JSON.parse(n);let i=!0;if(-1===e)d(`purging value (forced): ${t}`);else if("number"!=typeof o.expires||"string"!=typeof o.version)d(`purging invalid value: ${t}:`,o);else if(e>o.expires){d(`purging expired value: ${t} (${new Date(o.expires).toLocaleString()})`)}else o.version!==c?d(`purging obsolete value: ${t} (${o.version})`):i=!1;i&&GM_deleteValue(t)}}function p(e,t,n={}){const o=n.context||document,i=typeof t;if("function"===i)return t.apply(o,n.args||[]);if("string"===i)return $(t,o);throw new TypeError(`invalid ${e} selector: expected string or function, got: ${i}`)}jQuery.highlight=(e=>(async function(t){const n=Date.now(),c=!("cache"in t&&!t.cache),d="dedup"in t&&!t.dedup,y=c?l:()=>!1,h=function(e){let t=0;for(const n in e)t+=e[n]*(u[n]||0);return 1e3*t}(t.ttl||a),w=t.color||"#FFFD66",v=t.target||s,m=t.id||"id",$=t.item,b=t.onHighlight||function(){};let x;if(r.enabled="debug"in t&&!!t.debug,"function"==typeof m)x=((e,t)=>p("id",m,{context:e,args:t}));else{if("string"!=typeof m)throw new TypeError(`invalid ID selector: expected string or function, got: ${m}`);x=(t=>e(t).attr(m))}if("string"!=typeof $&&"function"!=typeof $)throw new TypeError(`invalid item selector: expected string or function, got: ${$}`);async function M(e){for(const t of e){const e=p("target",v,{context:t}),i=x(t,[e]),r=await y(i);r&&!d||(e.css("background-color",w),e.addClass(o),b.call(t,e,{id:i,color:w})),r||f(i,n+h)}}GM_registerMenuCommand(i,()=>{g(-1)}),g(n);const G=e(document);if(G.onCreate&&"string"==typeof $)G.onCreate($,M,!0);else{const e=p("item",$);await M(e)}}))(jQuery),jQuery.highlight.className=o,jQuery.highlight.selector="."+o}();
